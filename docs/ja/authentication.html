<!DOCTYPE html><html lang="ja"><head><meta name="docsearch:version" content="19 BETA"/><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Email authentication · 4D for iOS</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&gt; **OBJECTIVES**"/><meta name="docsearch:language" content="ja"/><meta property="og:title" content="Email authentication · 4D for iOS"/><meta property="og:type" content="website"/><meta property="og:url" content="https://doc4d.github.io/4d-for-ios/index.html"/><meta property="og:description" content="&gt; **OBJECTIVES**"/><meta property="og:image" content="https://doc4d.github.io/4d-for-ios/img/logo4DforiOS.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://doc4d.github.io/4d-for-ios/img/logo4DforiOS.png"/><link rel="shortcut icon" href="/4d-for-ios/img/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/ocean.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-129154982-1', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/4d-for-ios/js/code-block-buttons.js"></script><script src="/4d-for-ios/js/scrollSpy.js"></script><link rel="stylesheet" href="/4d-for-ios/css/main.css"/><script src="/4d-for-ios/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/4d-for-ios/ja"><h2 class="headerTitle">4D for iOS</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/4d-for-ios/docs/ja/overview.html" target="_self">Docs</a></li><li class="siteNavGroupActive"><a href="/4d-for-ios/docs/ja/contact-app.html" target="_self">Tutorials</a></li><li class=""><a href="/4d-for-ios/docs/ja/template.html" target="_self">Templates &amp; Formatters</a></li><li class=""><a href="/4d-for-ios/docs/ja/faq.html" target="_self">FAQ</a></li><li class=""><a style="font-weight:bold" href="https://developer.4d.com/4d-for-ios" target="_self">v19 BETA</a></li><li class=""><a href="https://developer.4d.com/4d-for-ios/Rx" target="_self">v18 R6</a></li><li class=""><a href="https://developer.4d.com/4d-for-ios/18" target="_self">v18</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/4d-for-ios/img/language.svg" alt="Languages icon"/>日本語</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/4d-for-ios/docs/en/authentication.html">English</a></li><li><a href="/4d-for-ios/docs/es/authentication.html">Español</a></li><li><a href="/4d-for-ios/docs/fr/authentication.html">Français</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Features</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Creating your iOS App<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/contact-app.html">はじめてのアプリ</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/custom-login-form.html">Custom Login Form</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Customizing with Xcode<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/open-xcode.html">作業をXcodeに引き継ぐ</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/xcode-overview.html">Xcode ガイド</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/4d-for-ios-project-organization.html">4D for iOS プロジェクトの構成</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/customize-your-ios-app.html">Customize your 4D for iOS App</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Creating List forms<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/creating-listform-templates.html">リストフォームのテンプレート</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/icon-listform-template.html">リストフォームのアイコン</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/manifest-listform-template.html">manifest.json</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/svg-file-listform-template.html">template.svg</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/storyboard-listform-template.html">ストーリーボード</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Creating Detail forms<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/creating-detailform-templates.html">Detail form templates</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/icon-detailform-template.html">詳細画面のアイコン</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/manifest-detailform-template.html">manifest.json</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/svg-file-detailform-template.html">template.svg</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/storyboard-detailform-template.html">ストーリーボード</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Gallery<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/gallery-template-install.html">Install a template</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/gallery-template-update.html">Update a template</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">アイコン<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/using-icons.html">アイコン</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/create-icons.html">アイコンを追加する</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/include-icons.html">プロジェクトにアイコンを追加する</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/select-icons.html">アイコンを選択する</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">データフォーマッター<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/data-formatter.html">データフォーマッター</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/data-formatter-mobile-project.html">モバイルプロジェクトを開く</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/data-formatter-build-and-run.html">プロジェクトをビルドして実行</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/creating-data-formatter.html">カスタムのデータフォーマッター</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">検索エリアに複数のフィールドを設定する<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/multi-criteria-search.html">検索エリアに複数のフィールドを設定する</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">クエリフィルター<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/filter-query-introduction.html">クエリフィルター</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/define-filter-query.html">クエリフィルターを設定する</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/user-information-query.html">ユーザー情報に基づくクエリ</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Actions<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/actions-getting-started.html">データベースを用意する</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/define-first-action.html">はじめてのアクション</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/action-custom-template.html">テンプレートにアクションを追加する</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/action-parameters.html">アクションパラメーターを使用する</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Relations<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/many-to-one-relations.html">Ｎ対１リレーション</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/one-to-many-relations.html">１対Ｎリレーション</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/one-to-many-relations-title-definition.html">１対Ｎタイトルの設定</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/one-to-many-relations-custom-button.html">１対Ｎカスタムボタン</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/one-to-many-relations-actions.html">１対Ｎとアクション</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/relations-interactions.html">Relation interactions</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Features<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem navListItemActive"><a class="navItem" href="/4d-for-ios/docs/ja/authentication.html">Email authentication</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/push-notification.html">Push notifications</a></li><li class="navListItem"><a class="navItem" href="/4d-for-ios/docs/ja/deep-linking.html">Deep Linking</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/4D/4D-for-iOS/edit/master/docs/Features-Authentication.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Email authentication</h1></header><article><div><span><blockquote>
<p><strong>OBJECTIVES</strong></p>
<p>Integrate email confirmation to authenticate mobile app users</p>
</blockquote>
<blockquote>
<p><strong>PREREQUISITES</strong></p>
<p>The <a href="https://github.com/4d-for-ios/4D-Mobile-App-Server">4D Mobile App Server</a> component that allows email authentication is integrated in 4D mono and 4D server 18R4.</p>
</blockquote>
<p>Let your customers and clients feel comfortable logging into their app using the email authentication!</p>
<p>It provides a way to verify that an email comes from whom it claims to be from, and will allow to block harmful or fraudulent uses of email.</p>
<p>In short, the principle is the following:</p>
<h3><a class="anchor" aria-hidden="true" id="1-activate-the-login-form"></a><a href="#1-activate-the-login-form" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. Activate the login form</h3>
<p>You integrate a login form into your app, from the project editor in the Publishing section.</p>
<p><img src="/4d-for-ios/docs/assets/en/authentication/email-authentication-publishing-section.png" alt="Email authentication activation"></p>
<h3><a class="anchor" aria-hidden="true" id="2-enter-your-email-address"></a><a href="#2-enter-your-email-address" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. Enter your email address</h3>
<p>An email is required when the app is launched. When a user enters their email and clicks on the Login button, the On Mobile app Authentication is called and the user's session status should be updated to a &quot;pending&quot; status. A validation email is then sent to the user.</p>
<h3><a class="anchor" aria-hidden="true" id="3-check-your-mailbox"></a><a href="#3-check-your-mailbox" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. Check your mailbox</h3>
<p>When the validation email is available, the user only needs to click on the validation link. This will call the On Web Connection database method and update the user's session status from &quot;pending&quot; to &quot;accepted&quot;.</p>
<h3><a class="anchor" aria-hidden="true" id="4-go-back-to-your-app"></a><a href="#4-go-back-to-your-app" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. Go back to your app</h3>
<p>Once the validation is done, the user can reopen their app and click on the Login button. The On Mobile App Authentication is called again but this time, the user's session status is &quot;accepted&quot;, so the access is granted!</p>
<p>That’s quite simple, right?</p>
<p>So, to make the validation process easier and secure, 4D for iOS handles:</p>
<p><img src="/4d-for-ios/docs/assets/en/authentication/4D-for-iOS-email-auth.png" alt="Authentication"></p>
<p>But let's figure out how this works, using our special component!</p>
<h1><a class="anchor" aria-hidden="true" id="using-the-component"></a><a href="#using-the-component" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using the component</h1>
<h2><a class="anchor" aria-hidden="true" id="a-component-to-deal-with-email-authentication"></a><a href="#a-component-to-deal-with-email-authentication" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>A component to deal with email authentication</h2>
<p>A toolbox component has been developed to help you manage several processes: the 4D Mobile App Server Component.</p>
<p>Let's see how to use it!</p>
<h2><a class="anchor" aria-hidden="true" id="on-mobile-app-authentification"></a><a href="#on-mobile-app-authentification" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>On Mobile App Authentification</h2>
<p>Call the Mobile <strong>App Email Checker</strong> method in the <strong>On Mobile App Authentification database</strong> method with the information provided by the mobile application:</p>
<pre><code class="hljs css language-4d"><span class="hljs-function">C_OBJECT</span>(<span class="hljs-variable">$0</span>)
<span class="hljs-function">C_OBJECT</span>(<span class="hljs-variable">$1</span>)
<span class="hljs-variable">$0</span>:=<span class="hljs-function"> Mobile App Email Checker </span>(<span class="hljs-variable">$1</span>)

</code></pre>
<h2><a class="anchor" aria-hidden="true" id="mobile-app-active-session"></a><a href="#mobile-app-active-session" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Mobile App Active Session</h2>
<p>Call the <strong>Activate sessions</strong> method in the <strong>On Web Connection</strong> database method with the Session ID parameter retrieved from the URL:</p>
<pre><code class="hljs css language-4d"><span class="hljs-function">C_TEXT</span>(<span class="hljs-variable">$1</span>)<span class="hljs-keyword">
Case of</span> 
: (<span class="hljs-function">Mobile App Active Session</span>(<span class="hljs-variable">$1</span>).success)
    <span class="hljs-comment">//add log if you want</span><span class="hljs-keyword">
End case</span> 

</code></pre>
<p>Its as simple as that! You will find more information about this component in the <a href="https://github.com/4d-for-ios/4D-Mobile-App-Server/blob/master/Documentation/Methods/Mobile%20App%20Email%20Checker.md">documentation</a>, especially about resources you may use, like html templates and settings that you may want to define.</p>
<h1><a class="anchor" aria-hidden="true" id="without-the-component"></a><a href="#without-the-component" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Without the component</h1>
<p>We will see here a basic example without using the component.</p>
<p>To do so, here is the code you can use:</p>
<h2><a class="anchor" aria-hidden="true" id="on-mobile-app-authentication"></a><a href="#on-mobile-app-authentication" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>On Mobile App Authentication</h2>
<pre><code class="hljs css language-4d"><span class="hljs-function">C_OBJECT</span>(<span class="hljs-variable">$0</span>;<span class="hljs-variable">$1</span>;<span class="hljs-variable">$response</span>;<span class="hljs-variable">$request</span>;<span class="hljs-variable">$email</span>;<span class="hljs-variable">$status</span>)

  <span class="hljs-comment">// parameters settings come from the mobile app</span>
<span class="hljs-variable">$request</span>:=<span class="hljs-variable">$1</span>

  <span class="hljs-comment">// Create an email with an activation URL</span>
<span class="hljs-variable">$mail</span>:=New object
<span class="hljs-variable">$mail</span>.from:=<span class="hljs-string">"myapplication@gmail.com"</span>
<span class="hljs-variable">$mail</span>.to:=<span class="hljs-variable">$request</span>.email  <span class="hljs-comment">// email entered by the user on their smartphone</span>
<span class="hljs-variable">$mail</span>.subject:=<span class="hljs-string">"Login confirmation"</span>
<span class="hljs-variable">$mail</span>.htmlBody:=<span class="hljs-string">"&lt;a href=\"https://myserverapplication/activation/"</span>+<span class="hljs-variable">$request</span>.session.id \
+<span class="hljs-string">"\"&gt;Click Here to confirm your email.&lt;/a&gt;\"&lt;br&gt;"</span>

  <span class="hljs-comment">// Send mail</span>
<span class="hljs-variable">$smtp</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"host"</span>;<span class="hljs-string">"smtp.gmail.com"</span>;<span class="hljs-string">"user"</span>;<span class="hljs-string">"myapplication@gmail.com"</span>;<span class="hljs-string">"password"</span>;<span class="hljs-string">"xxx"</span>)
<span class="hljs-variable">$transporter</span>:=<span class="hljs-function">SMTP New transporter</span>(<span class="hljs-variable">$smtp</span>)
<span class="hljs-variable">$status</span>:=<span class="hljs-variable">$transporter</span>.<span class="hljs-function">send</span>(<span class="hljs-variable">$mail</span>)

  <span class="hljs-comment">// Configure response for 4D for iOS</span>
<span class="hljs-variable">$response</span>:=New object

  <span class="hljs-comment">// Declare that the current session is being verified</span>
<span class="hljs-variable">$response</span>.verify:=<span class="hljs-literal">True</span>

  <span class="hljs-comment">// Check if the email was successsfully sent</span><span class="hljs-keyword">
If</span> (<span class="hljs-variable">$status</span>.success)
      <span class="hljs-comment">//create a share object to contain our sessions, accessible from all processes</span><span class="hljs-keyword">
    If</span> (Storage.pendingSessions=<span class="hljs-literal">Null</span>)<span class="hljs-keyword">
        Use</span> (Storage)
            Storage.pendingSessions:=New shared object<span class="hljs-keyword">
        End use</span><span class="hljs-keyword"> 
    End if</span><span class="hljs-keyword"> 

    Use</span> (Storage.pendingSessions)
          <span class="hljs-comment">//Add a session to our session lists</span>
        Storage.pendingSessions[<span class="hljs-variable">$request</span>.session.id]:=<span class="hljs-variable">$request</span>.team.id+<span class="hljs-string">"."</span>+<span class="hljs-variable">$request</span>.application.id<span class="hljs-keyword">
    End use</span> 

    <span class="hljs-variable">$response</span>.success:=<span class="hljs-literal">True</span>
    <span class="hljs-variable">$response</span>.statusText:=<span class="hljs-string">"Please check your mail box"</span><span class="hljs-keyword">
Else</span> 
      <span class="hljs-comment">// Display an error message on the smatphone</span>
    <span class="hljs-variable">$response</span>.statusText:=<span class="hljs-string">"The mail is not sent please try again later"</span>
    <span class="hljs-variable">$response</span>.success:=<span class="hljs-literal">False</span><span class="hljs-keyword">
End if</span> 

<span class="hljs-variable">$0</span>:=<span class="hljs-variable">$response</span>

</code></pre>
<h2><a class="anchor" aria-hidden="true" id="on-web-connection"></a><a href="#on-web-connection" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>On Web connection</h2>
<p>This method will allow you activate the session after clicking on the link in the confirmation email.</p>
<pre><code class="hljs css language-4d"><span class="hljs-function">C_TEXT</span>(<span class="hljs-variable">$1</span>;<span class="hljs-variable">$2</span>;<span class="hljs-variable">$3</span>;<span class="hljs-variable">$4</span>;<span class="hljs-variable">$5</span>;<span class="hljs-variable">$6</span>)

<span class="hljs-function">C_TEXT</span>(<span class="hljs-variable">$token</span>;<span class="hljs-variable">$session</span>)
<span class="hljs-function">C_OBJECT</span>(<span class="hljs-variable">$sessionFile</span>;<span class="hljs-variable">$sessionObject</span>)<span class="hljs-keyword">

If</span> (<span class="hljs-variable">$1</span>=<span class="hljs-string">"/activation/@"</span>)
    <span class="hljs-variable">$token</span>:=<span class="hljs-function">Substring</span>(<span class="hljs-variable">$1</span>;<span class="hljs-number">13</span>)<span class="hljs-keyword">
End if</span> 


  <span class="hljs-comment">//get session from ID received from URL</span><span class="hljs-keyword">
If</span> (Storage.pendingSessions#<span class="hljs-literal">Null</span>)
    <span class="hljs-variable">$session</span>:=Storage.pendingSessions[<span class="hljs-variable">$token</span>]<span class="hljs-keyword">
End if</span><span class="hljs-keyword"> 

If</span> (<span class="hljs-variable">$session</span>#<span class="hljs-string">""</span>)
      <span class="hljs-comment">//get session folder</span>
    <span class="hljs-variable">$sessionFile</span>:=<span class="hljs-function">Folder</span>(fk mobileApps folder).<span class="hljs-function">folder</span>(<span class="hljs-variable">$session</span>).<span class="hljs-function">file</span>(<span class="hljs-variable">$token</span>)
    <span class="hljs-variable">$sessionObject</span>:=<span class="hljs-function">JSON Parse</span>(<span class="hljs-variable">$sessionFile</span>.<span class="hljs-function">getText</span>())
      <span class="hljs-comment">//update status value</span>
    <span class="hljs-variable">$sessionObject</span>.status:=<span class="hljs-string">"accepted"</span>
    <span class="hljs-variable">$sessionFile</span>.<span class="hljs-function">setText</span>(<span class="hljs-function">JSON Stringify</span>(<span class="hljs-variable">$sessionObject</span>))<span class="hljs-keyword">
    Use</span> (Storage.pendingSessions)
          <span class="hljs-comment">//delete pending session</span>
<span class="hljs-function">        OB REMOVE</span>(Storage.pendingSessions;<span class="hljs-variable">$token</span>)<span class="hljs-keyword">
    End use</span> 

    <span class="hljs-comment">/*
        The MOBILE APP REFRESH SESSIONS command checks all mobile
        application session files located in the MobileApps folder of the server, 
        and updates existing session contents in memory for any edited files.
    */</span>

    MOBILE APP REFRESH SESSIONS

<span class="hljs-function">    WEB SEND TEXT</span>(<span class="hljs-string">"You are successfully authenticated"</span>)<span class="hljs-keyword">
Else</span> 
<span class="hljs-function">    WEB SEND TEXT</span>(<span class="hljs-string">"Invalid session"</span>)<span class="hljs-keyword">
End if</span> 
</code></pre>
<p>And that's it !</p>
<h2><a class="anchor" aria-hidden="true" id="これからどうする？"></a><a href="#これからどうする？" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>これからどうする？</h2>
<p>We've covered basic email validation in this tutorial. You should now be able to easily access your 4D for iOS app !</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/4d-for-ios/docs/ja/relations-interactions.html"><span class="arrow-prev">← </span><span>Previous</span></a><a class="docs-next button" href="/4d-for-ios/docs/ja/push-notification.html"><span>Push notifications</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#a-component-to-deal-with-email-authentication">A component to deal with email authentication</a></li><li><a href="#on-mobile-app-authentification">On Mobile App Authentification</a></li><li><a href="#mobile-app-active-session">Mobile App Active Session</a></li><li><a href="#on-mobile-app-authentication">On Mobile App Authentication</a></li><li><a href="#on-web-connection">On Web connection</a></li><li><a href="#これからどうする？">これからどうする？</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="https://www.4d.com" class="nav-home"><img src="/4d-for-ios/img/logohome.png" alt="4D for iOS"/></a><div><h5>Community</h5><a href="https://developer.4D.com">4D Developer Center</a><a href="https://blog.4d.com/">4D Blog</a><a href="https://discuss.4d.com/">4D Forum</a><a href="https://www.facebook.com/4Dsoftware/">Facebook</a><a href="https://twitter.com/4Dsoftware">Twitter</a><a href="https://www.youtube.com/user/4Dsoftware">Youtube</a><a href="https://github.com/4D/">GitHub</a></div><div><h5>Support</h5><a href="https://doc.4d.com/">4D Doc Center <i>(Where It All Began)</i></a><a href="http://kb.4d.com/">Knowledge Base</a><a href="https://us.4d.com/product-download">Downloads</a><a href="https://us.4d.com/resources">Resources</a><a href="https://us.4d.com/4d-technical-support">Get Support</a></div><div><h5>Company</h5><a href="https://us.4d.com/about-us">About 4D</a><a href="https://us.4d.com/contact-us">Contact us</a><a href="https://us.4d.com/4d-around-the-world">4D around the world</a><a href="https://us.4d.com/careers">Careers</a></div></section><section class="copyright">© 2021 4D SAS - All rights reserved</section><section class="copyright"><a class="cp2" href="https://us.4d.com/terms-and-conditions">Terms &amp; Conditions</a> | <a class="cp2" href="https://us.4d.com/legal-notices">Legal Notices</a> | <a class="cp2" href="https://us.4d.com/data-policy">Data Policy</a> | <a class="cp2" href="https://us.4d.com/cookies-policy">Cookie Policy</a> | <a class="cp2" href="https://us.4d.com/license">Product license</a></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'a00a6f38bb6849ff2b47dad3fcfceaa0',
                indexName: 'davaz4d',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>
